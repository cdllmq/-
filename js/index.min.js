(function(a){a.Tools={getRandom:function(a,b){return Math.floor(Math.random()*(b-a+1))+a}}})(window,void 0),function(){function a(a){a=a||{},this.x=a.x||0,this.y=a.y||0,this.width=a.width||20,this.height=a.height||20,this.color=a.color||"red"}function b(){for(var a=c.length-1;0<=a;a--)c[a].parentNode.removeChild(c[a]),c.splice(a,1)}var c=[];a.prototype.render=function(a){b(),this.x=20*(Tools.getRandom(0,(a.offsetWidth/this.width-1)*this.width)%20),this.y=20*(Tools.getRandom(0,(a.offsetHeight/this.height-1)*this.height)%20),console.log(this.x,this.y),console.log(this.x%20,this.y%20);var d=document.createElement("div");a.appendChild(d),c.push(d),d.style.position="absolute",d.style.left=this.x+"px",d.style.top=this.y+"px",d.style.width=this.width+"px",d.style.height=this.height+"px",d.style.backgroundColor=this.color},window.Food=a}(),function(){function a(a){a=a||{},this.width=a.width||20,this.height=a.height||20,this.direction=a.direction||"rigth",this.body=[{x:2,y:0,color:"red"},{x:1,y:0,color:"blue"},{x:0,y:0,color:"blue"}]}function b(){for(var a=c.length-1;0<=a;a--)c[a].parentNode.removeChild(c[a]),c.splice(a,1)}var c=[];a.prototype.render=function(a){b();for(var d=0,e=this.body.length;d<e;d++){var f=this.body[d],g=document.createElement("div");a.appendChild(g),c.push(g),g.style.position="absolute",g.style.width=this.width+"px",g.style.height=this.height+"px",g.style.left=f.x*this.width+"px",g.style.top=f.y*this.height+"px",g.style.backgroundColor=f.color}},a.prototype.move=function(a,b){for(var c=this.body.length-1;0<c;c--)this.body[c].x=this.body[c-1].x,this.body[c].y=this.body[c-1].y;var d=this.body[0];switch(this.direction){case"rigth":d.x+=1;break;case"left":d.x-=1;break;case"top":d.y-=1;break;case"bottom":d.y+=1;}var e=d.x*this.width,f=d.y*this.width;if(e===a.x&&f===a.y){var g=this.body[this.body.length-1];this.body.push({x:g.x,y:g.y,color:g.color}),a.render(b)}},window.Snake=a}(),function(){function a(a){this.food=new Food,this.snake=new Snake,this.map=a,d=this}function b(){document.addEventListener("keydown",function(a){switch(a.keyCode){case 37:this.snake.direction="left";break;case 38:this.snake.direction="top";break;case 39:this.snake.direction="rigth";break;case 40:this.snake.direction="bottom";}}.bind(d),!1)}function c(){var a=setInterval(function(){this.snake.move(this.food,this.map),this.snake.render(this.map);var b=this.snake.body[0].x,c=this.snake.body[0].y,d=this.map.offsetWidth/this.snake.width,e=this.map.offsetHeight/this.snake.height;(0>b||b>=d)&&(alert("\u6E38\u620F\u7ED3\u675F"),clearInterval(a)),(0>c||c>=e)&&(alert("\u6E38\u620F\u7ED3\u675F"),clearInterval(a))}.bind(d),200)}var d;a.prototype.start=function(){this.food.render(this.map),this.snake.render(this.map),c(),b()},window.Game=a}(),function(){var a=confirm("\u5F00\u59CB\u6E38\u620F");if(a){var b=document.getElementById("map"),c=new Game(b);c.start()}}();